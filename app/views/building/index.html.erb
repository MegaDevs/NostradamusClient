<h1 class="title">Elenco strutture</h1>
<script type="text/javascript">
function openCamera(city){
	$("#dialogs").append("<div class='dialog' cameraID='" + city.id + "' id='dialog_" + city.id + "'><%=j render "camera" %></div>");
	$("#dialog_" + city.id).dialog({ autoOpen: true, width : 790, title : city.id, closeText : "Chiudi"});
}

function loadCameras(){
    $.getJSON("http://nostradamus-whymca.appspot.com/get_all_cameras?callback=?", function(json){
		for (var i = 0; i < json.length; i++) {
			$("#buildings").append("<li id='"+ json[i].id + "' title='"+ json[i].id +"' onclick='openCamera(this); play(\"" + json[i].id + "\");'><a href=#>" + json[i].id + "</a></li>");
		}
	});
}

$(document).ready(function(){
	loadCameras();
});

</script>

<ul id="buildings">
</ul>

<div id="dialogs">
</div>
